{"ast":null,"code":"import React,{useState,useEffect}from'react';import SearchBar from'./SearchBar';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StopArrivals=()=>{const[selectedStationId,setSelectedStationId]=useState(null);const[arrivals,setArrivals]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleSearch=async query=>{try{const response=await fetch(\"https://api.tfl.gov.uk/StopPoint/Search?query=\".concat(query));const data=await response.json();const firstResult=data.matches[0];if(firstResult){setSelectedStationId(firstResult.id);}else{setSelectedStationId(null);}}catch(error){console.error('Error fetching data:',error);setSelectedStationId(null);}};useEffect(()=>{const fetchArrivals=async()=>{if(!selectedStationId){return;}try{setLoading(true);const response=await fetch(\"https://api.tfl.gov.uk/StopPoint/\".concat(selectedStationId,\"/Arrivals\"));const data=await response.json();setArrivals(data);setLoading(false);}catch(error){setError(error);setLoading(false);}};fetchArrivals();},[selectedStationId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"stop-arrivals-container\",children:[/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearch}),selectedStationId&&/*#__PURE__*/_jsxs(\"p\",{className:\"selected-station-id\",children:[\"Selected Station ID: \",selectedStationId]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading arrivals...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"error-message\",children:[\"Error fetching arrivals: \",error.message]}),arrivals.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"arrivals-list\",children:arrivals.map(arrival=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"station-name\",children:arrival.stationName}),/*#__PURE__*/_jsxs(\"p\",{className:\"line-name\",children:[\"Line: \",arrival.lineName]}),/*#__PURE__*/_jsxs(\"p\",{className:\"destination-name\",children:[\"Destination: \",arrival.destinationName]}),/*#__PURE__*/_jsxs(\"p\",{className:\"time-to-arrival\",children:[\"Arriving in \",Math.ceil(arrival.timeToStation/60),\" min(s)\"]})]},arrival.id))})]});};export default StopArrivals;","map":{"version":3,"names":["React","useState","useEffect","SearchBar","jsx","_jsx","jsxs","_jsxs","StopArrivals","selectedStationId","setSelectedStationId","arrivals","setArrivals","loading","setLoading","error","setError","handleSearch","query","response","fetch","concat","data","json","firstResult","matches","id","console","fetchArrivals","className","children","onSearch","message","length","map","arrival","stationName","lineName","destinationName","Math","ceil","timeToStation"],"sources":["/Users/lewishollis/Documents/tfl-api/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport SearchBar from './SearchBar';\nimport './App.css';\n\nconst StopArrivals = () => {\n  const [selectedStationId, setSelectedStationId] = useState(null);\n  const [arrivals, setArrivals] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleSearch = async (query) => {\n    try {\n      const response = await fetch(`https://api.tfl.gov.uk/StopPoint/Search?query=${query}`);\n      const data = await response.json();\n      const firstResult = data.matches[0];\n\n      if (firstResult) {\n        setSelectedStationId(firstResult.id);\n      } else {\n        setSelectedStationId(null);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      setSelectedStationId(null);\n    }\n  };\n\n  useEffect(() => {\n    const fetchArrivals = async () => {\n      if (!selectedStationId) {\n        return;\n      }\n\n      try {\n        setLoading(true);\n\n        const response = await fetch(`https://api.tfl.gov.uk/StopPoint/${selectedStationId}/Arrivals`);\n        const data = await response.json();\n\n        setArrivals(data);\n        setLoading(false);\n      } catch (error) {\n        setError(error);\n        setLoading(false);\n      }\n    };\n\n    fetchArrivals();\n  }, [selectedStationId]);\n\n  return (\n    <div className=\"stop-arrivals-container\">\n      <SearchBar onSearch={handleSearch} />\n      {selectedStationId && (\n        <p className=\"selected-station-id\">Selected Station ID: {selectedStationId}</p>\n      )}\n\n      {loading && <p className=\"loading-message\">Loading arrivals...</p>}\n\n      {error && <p className=\"error-message\">Error fetching arrivals: {error.message}</p>}\n\n      {arrivals.length > 0 && (\n        <ul className=\"arrivals-list\">\n          {arrivals.map((arrival) => (\n            <li key={arrival.id}>\n              <h1 className=\"station-name\">{arrival.stationName}</h1>\n              <p className=\"line-name\">Line: {arrival.lineName}</p>\n              <p className=\"destination-name\">Destination: {arrival.destinationName}</p>\n              <p className=\"time-to-arrival\">Arriving in {Math.ceil(arrival.timeToStation / 60)} min(s)</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default StopArrivals;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}